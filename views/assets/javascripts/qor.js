"use strict";$.fn.qorSliderAfterShow=$.fn.qorSliderAfterShow||{},window.Mustache&&(window.Mustache.tags=["[[","]]"]),$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||$.fn.qorSlideoutBeforeHide&&($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),$.fn.select2.ajaxCommonOptions={dataType:"json",cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;var i=$.map(t,function(t){return t.id=t.Id||t.ID,t});return{results:i,pagination:{more:i.length>=20}}}},$.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=e.length>0?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?$(i):i};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return k.call(t).slice(8,-1).toLowerCase()}function i(t){return"string"==typeof t}function n(t){return"number"==typeof t&&!isNaN(t)}function o(t){return void 0===t}function r(t){return"date"===e(t)}function s(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(n(e)&&i.push(e),i.slice.apply(t,i))}function a(t,e){var i=s(arguments,2);return function(){return t.apply(e,i.concat(s(arguments)))}}function l(t){return t%4==0&&t%100!=0||t%400==0}function d(t,e){return[31,l(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function c(t){var e,i,n=String(t).toLowerCase(),o=n.match(g);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function h(e,i){i=t.isPlainObject(i)?i:{},i.language&&(i=t.extend({},h.LANGUAGES[i.language],i)),this.$element=t(e),this.options=t.extend({},h.DEFAULTS,i),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var u=t(window),f=window.document,p=t(f),m=window.Number,y="datepicker",b="click.datepicker",g=/(y|m|d)+/g,v=/^\d{2,4}$/,q=["datepicker-top-left","datepicker-top-right","datepicker-bottom-left","datepicker-bottom-right"].join(" "),_="datepicker-hide",w=Math.min,k=Object.prototype.toString;h.prototype={constructor:h,init:function(){var e=this.options,i=this.$element,n=e.startDate,o=e.endDate,r=e.date;this.$trigger=t(e.trigger||i),this.isInput=i.is("input")||i.is("textarea"),this.isInline=e.inline&&(e.container||!this.isInput),this.format=c(e.format),this.initialValue=this.getValue(),r=this.parseDate(r||this.initialValue),n&&(n=this.parseDate(n),r.getTime()<n.getTime()&&(r=new Date(n)),this.startDate=n),o&&(o=this.parseDate(o),n&&o.getTime()<n.getTime()&&(o=new Date(n)),r.getTime()>o.getTime()&&(r=new Date(o)),this.endDate=o),this.date=r,this.viewDate=new Date(r),this.initialDate=new Date(this.date),this.bind(),(e.autoshow||this.isInline)&&this.show(),e.autopick&&this.pick()},build:function(){var e,i=this.options,n=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=e=t(i.template),this.$week=e.find('[data-view="week"]'),this.$yearsPicker=e.find('[data-view="years picker"]'),this.$yearsPrev=e.find('[data-view="years prev"]'),this.$yearsNext=e.find('[data-view="years next"]'),this.$yearsCurrent=e.find('[data-view="years current"]'),this.$years=e.find('[data-view="years"]'),this.$monthsPicker=e.find('[data-view="months picker"]'),this.$yearPrev=e.find('[data-view="year prev"]'),this.$yearNext=e.find('[data-view="year next"]'),this.$yearCurrent=e.find('[data-view="year current"]'),this.$months=e.find('[data-view="months"]'),this.$daysPicker=e.find('[data-view="days picker"]'),this.$monthPrev=e.find('[data-view="month prev"]'),this.$monthNext=e.find('[data-view="month next"]'),this.$monthCurrent=e.find('[data-view="month current"]'),this.$days=e.find('[data-view="days"]'),this.isInline?t(i.container||n).append(e.addClass("datepicker-inline")):(t(f.body).append(e.addClass("datepicker-dropdown")),e.addClass(_)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.on("show.datepicker",e.show),t.isFunction(e.hide)&&i.on("hide.datepicker",e.hide),t.isFunction(e.pick)&&i.on("pick.datepicker",e.pick),this.isInput&&(i.on("keyup.datepicker",t.proxy(this.keyup,this)),e.trigger||i.on("focus.datepicker",t.proxy(this.show,this))),this.$trigger.on(b,t.proxy(this.show,this))},unbind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.off("show.datepicker",e.show),t.isFunction(e.hide)&&i.off("hide.datepicker",e.hide),t.isFunction(e.pick)&&i.off("pick.datepicker",e.pick),this.isInput&&(i.off("keyup.datepicker",this.keyup),e.trigger||i.off("focus.datepicker",this.show)),this.$trigger.off(b,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(m(t)){case 2:case"years":i.addClass(_),n.addClass(_),o.hasYear?(this.fillYears(),e.removeClass(_)):this.showView(0);break;case 1:case"months":e.addClass(_),n.addClass(_),o.hasMonth?(this.fillMonths(),i.removeClass(_)):this.showView(2);break;default:e.addClass(_),i.addClass(_),o.hasDay?(this.fillDays(),n.removeClass(_)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),o=p.outerHeight(),r=e.outerWidth(),s=e.outerHeight(),a=i.width(),l=i.height(),d=e.offset(),c=d.left,h=d.top,u=parseFloat(t.offset)||10,f="datepicker-top-left";h>l&&h+s+l>o?(h-=l+u,f="datepicker-bottom-left"):h+=s+u,c+a>n&&(c=c+r-a,f=f.replace("left","right")),i.removeClass(q).addClass(f).css({top:h,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(e,i){var n=t.Event(e,i);return this.$element.trigger(n),n},createItem:function(e){var i=this.options,n=i.itemTag,o={text:"",view:"",muted:!1,picked:!1,disabled:!1};return t.extend(o,e),"<"+n+" "+(o.disabled?'class="'+i.disabledClass+'"':o.picked?'class="'+i.pickedClass+'"':o.muted?'class="'+i.mutedClass+'"':"")+(o.view?' data-view="'+o.view+'"':"")+">"+o.text+"</"+n+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var e,i=this.options,n=parseInt(i.weekStart,10)%7,o=i.daysMin,r="";for(o=t.merge(o.slice(n),o.slice(0,n)),e=0;e<=6;e++)r+=this.createItem({text:o[e]});this.$week.html(r)},fillYears:function(){var e,i=this.options,n=i.disabledClass||"",o=i.yearSuffix||"",r=t.isFunction(i.filter)&&i.filter,s=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getMonth(),h=l.getDate(),u=this.date,f=u.getFullYear(),p=!1,m=!1,y=!1,b=!1,g=!1,v="";for(e=-5;e<=6;e++)u=new Date(d+e,c,h),g=-5===e||6===e,b=d+e===f,y=!1,s&&(y=u.getFullYear()<s.getFullYear(),-5===e&&(p=y)),!y&&a&&(y=u.getFullYear()>a.getFullYear(),6===e&&(m=y)),!y&&r&&(y=!1===r.call(this.$element,u)),v+=this.createItem({text:d+e,view:y?"year disabled":b?"year picked":"year",muted:g,picked:b,disabled:y});this.$yearsPrev.toggleClass(n,p),this.$yearsNext.toggleClass(n,m),this.$yearsCurrent.toggleClass(n,!0).html(d+-5+o+" - "+(d+6)+o),this.$years.html(v)},fillMonths:function(){var e,i=this.options,n=i.disabledClass||"",o=i.monthsShort,r=t.isFunction(i.filter)&&i.filter,s=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getDate(),h=this.date,u=h.getFullYear(),f=h.getMonth(),p=!1,m=!1,y=!1,b=!1,g="";for(e=0;e<=11;e++)h=new Date(d,e,c),b=d===u&&e===f,y=!1,s&&(p=h.getFullYear()===s.getFullYear(),y=p&&h.getMonth()<s.getMonth()),!y&&a&&(m=h.getFullYear()===a.getFullYear(),y=m&&h.getMonth()>a.getMonth()),!y&&r&&(y=!1===r.call(this.$element,h)),g+=this.createItem({index:e,text:o[e],view:y?"month disabled":b?"month picked":"month",picked:b,disabled:y});this.$yearPrev.toggleClass(n,p),this.$yearNext.toggleClass(n,m),this.$yearCurrent.toggleClass(n,p&&m).html(d+i.yearSuffix||""),this.$months.html(g)},fillDays:function(){var e,i,n,o=this.options,r=o.disabledClass||"",s=o.yearSuffix||"",a=o.monthsShort,l=parseInt(o.weekStart,10)%7,c=t.isFunction(o.filter)&&o.filter,h=this.startDate,u=this.endDate,f=this.viewDate,p=f.getFullYear(),m=f.getMonth(),y=p,b=m,g=p,v=m,q=this.date,_=q.getFullYear(),w=q.getMonth(),k=q.getDate(),S=!1,$=!1,x=!1,D=!1,C=[],T=[],j=[];for(0===m?(y-=1,b=11):b-=1,e=d(y,b),q=new Date(p,m,1),n=q.getDay()-l,n<=0&&(n+=7),h&&(S=q.getTime()<=h.getTime()),i=e-(n-1);i<=e;i++)q=new Date(y,b,i),x=!1,h&&(x=q.getTime()<h.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),C.push(this.createItem({text:i,view:"day prev",muted:!0,disabled:x}));for(11===m?(g+=1,v=0):v+=1,e=d(p,m),n=42-(C.length+e),q=new Date(p,m,e),u&&($=q.getTime()>=u.getTime()),i=1;i<=n;i++)q=new Date(g,v,i),x=!1,u&&(x=q.getTime()>u.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),T.push(this.createItem({text:i,view:"day next",muted:!0,disabled:x}));for(i=1;i<=e;i++)q=new Date(p,m,i),D=p===_&&m===w&&i===k,x=!1,h&&(x=q.getTime()<h.getTime()),!x&&u&&(x=q.getTime()>u.getTime()),!x&&c&&(x=!1===c.call(this.$element,q)),j.push(this.createItem({text:i,view:x?"day disabled":D?"day picked":"day",picked:D,disabled:x}));this.$monthPrev.toggleClass(r,S),this.$monthNext.toggleClass(r,$),this.$monthCurrent.toggleClass(r,S&&$).html(o.yearFirst?p+s+" "+a[m]:a[m]+" "+p+s),this.$days.html(C.join("")+j.join(" ")+T.join(""))},click:function(e){var i,n,o,r,s,a,l=t(e.target),d=this.viewDate;if(e.stopPropagation(),e.preventDefault(),!l.hasClass("disabled"))switch(i=d.getFullYear(),n=d.getMonth(),o=d.getDate(),a=l.data("view")){case"years prev":case"years next":i="years prev"===a?i-10:i+10,s=l.text(),r=v.test(s),r&&(i=parseInt(s,10),this.date=new Date(i,n,w(o,28))),this.viewDate=new Date(i,n,w(o,28)),this.fillYears(),r&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":i="year prev"===a?i-1:i+1,this.viewDate=new Date(i,n,w(o,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":i=parseInt(l.text(),10),this.date=new Date(i,n,w(o,28)),this.viewDate=new Date(i,n,w(o,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":n="month prev"===a?n-1:"month next"===a?n+1:n,this.viewDate=new Date(i,n,w(o,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":n=t.inArray(l.text(),this.options.monthsShort),this.date=new Date(i,n,w(o,28)),this.viewDate=new Date(i,n,w(o,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":n="day prev"===a?n-1:"day next"===a?n+1:n,o=parseInt(l.text(),10),this.date=new Date(i,n,o),this.viewDate=new Date(i,n,o),this.fillDays(),"day"===a&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==f;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=i(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger("show.datepicker").isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(_).on(b,t.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(u.on("resize.datepicker",this._place=a(this.place,this)),p.on(b,this._clickDoc=a(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger("hide.datepicker").isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(_).off(b,this.click),this.isInline||(u.off("resize.datepicker",this._place),p.off(b,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger("pick.datepicker",{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(e,i){var r=this.options,s=r.months;return t.isNumeric(e)?e=m(e):o(i)&&(i=e),!0===i&&(s=r.monthsShort),s[n(e)?e:this.date.getMonth()]},getDayName:function(e,i,r){var s=this.options,a=s.days;return t.isNumeric(e)?e=m(e):(o(r)&&(r=i),o(i)&&(i=e)),a=!0===r?s.daysMin:!0===i?s.daysShort:a,a[n(e)?e:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(e,n){var o=this.options.filter;if(r(e)||i(e)){if(e=this.parseDate(e),t.isFunction(o)&&!1===o.call(this.$element,e))return;this.date=e,this.viewDate=new Date(e),n||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(r(t)||i(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(r(t)||i(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,n,o,s,a,l,d=this.format,c=[];if(r(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(i(t)&&(c=t.match(/\d+/g)||[]),t=new Date,n=t.getFullYear(),o=t.getDate(),s=t.getMonth(),e=d.parts.length,c.length===e)for(l=0;l<e;l++)switch(a=parseInt(c[l],10)||1,d.parts[l]){case"dd":case"d":o=a;break;case"mm":case"m":s=a-1;break;case"yy":n=2e3+a;break;case"yyyy":n=a}return new Date(n,s,o)},formatDate:function(t){var e,i,n,o,s,a=this.format,l="";if(r(t))for(l=a.source,i=t.getFullYear(),o={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i},o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=a.parts.length,s=0;s<e;s++)n=a.parts[s],l=l.replace(n,o[n]);return l},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(y)}},h.LANGUAGES={},h.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},h.setDefaults=function(e){t.extend(h.DEFAULTS,t.isPlainObject(e)&&e)},h.other=t.fn.qorDatepicker,t.fn.qorDatepicker=function(e){var n,r=s(arguments,1);return this.each(function(){var o,s,a=t(this),l=a.data(y);if(!l){if(/destroy/.test(e))return;o=t.extend({},a.data(),t.isPlainObject(e)&&e),a.data(y,l=new h(this,o))}i(e)&&t.isFunction(s=l[e])&&(n=s.apply(l,r))}),o(n)?this:n},t.fn.qorDatepicker.Constructor=h,t.fn.qorDatepicker.languages=h.LANGUAGES,t.fn.qorDatepicker.setDefaults=h.setDefaults,t.fn.qorDatepicker.noConflict=function(){return t.fn.qorDatepicker=h.other,this}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.$wrap=t(o),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.ajaxForm={},this.init()}var i=window.Mustache,n="click.qor.action",o=".qor-action-forms",r=".qor-action-bulk-buttons",s=".qor-table-container";return e.prototype={constructor:e,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,t.proxy(this.click,this)),t(document).on(n,".qor-table--bulking tr",this.click).on(n,"a.qor-action--button",this.actionLink)},unbind:function(){this.$element.off(n,this.click),t(document).off(n,".qor-table--bulking tr",this.click).off(n,"a.qor-action--button",this.actionLink)},initActions:function(){this.tables=t(s).find("table").length,this.tables||(t(r).find("button").attr("disabled",!0),t("a.qor-action--button").attr("disabled",!0))},collectFormData:function(){var e=t(".qor-table--bulking").find(".mdl-checkbox__input:checked"),i=[];return e.length&&e.each(function(){var e=t(this).closest("tr").data("primary-key");e&&i.push({name:"primary_values[]",value:e.toString()})}),this.ajaxForm.formData=i,this.ajaxForm},actionLink:function(){if(!t(s).find("table").length)return!1},actionSubmit:function(e){var i=t(e);if(this.$actionButton=i,i.data().method)return this.submit(),!1},click:function(e){var i=t(e.target);if(this.$actionButton=i,i.data().ajaxForm)return this.collectFormData(),this.ajaxForm.properties=i.data(),this.submit(),!1;if(i.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),t(r).find("button").toggleClass("hidden"),this.appendTableCheckbox(),t(s).addClass("qor-table--bulking"),t(".qor-page__header").find(".qor-actions").addClass("hidden"),t(".qor-page__header").find(".qor-search-container").addClass("hidden")),i.is(".qor-action--exit-bulk")&&(this.$wrap.addClass("hidden"),t(r).find("button").toggleClass("hidden"),this.removeTableCheckbox(),t(s).removeClass("qor-table--bulking"),t(".qor-page__header").find(".qor-actions").removeClass("hidden"),t(".qor-page__header").find(".qor-search-container").removeClass("hidden")),t(this).is("tr")&&!i.is("a")){var n=t(this).find("td").first();if(n.find(".mdl-checkbox__input").get(0)){var o=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open"),a=n.find(".mdl-js-checkbox"),l=t('[data-toggle="qor-action-slideout"]').find("form"),d=l.find(".js-primary-value"),c=t(this).data("primary-key"),h=d.filter('[value="'+c+'"]');a.toggleClass("is-checked"),n.parents("tr").toggleClass("is-selected");var u=a.hasClass("is-checked");return n.find("input").prop("checked",u),l.length&&o&&(u&&!h.length&&l.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+c+'" />'),!u&&h.length&&h.remove()),!1}}},renderFlashMessage:function(t){var n=e.FLASHMESSAGETMPL;return i.parse(n),i.render(n,t)},submit:function(){var e,i=this,n=this.$element,o=this.$actionButton,r=this.ajaxForm||{},s=r.properties||o.data(),a=s.url,l=s.undoUrl,d=o.hasClass("is_undo"),c=o.closest(".qor-slideout").length,h=n&&!c;return!s.fromIndex||r.formData&&r.formData.length?s.confirm&&s.ajaxForm&&!s.fromIndex?window.confirm(s.confirm)?(s=t.extend({},s,{_method:s.method}),void t.post(s.url,s,function(){window.location.reload()})):void 0:void(s.confirm&&!window.confirm(s.confirm)||(d&&(a=s.undoUrl),t.ajax(a,{method:s.method,data:r.formData,dataType:s.datatype,beforeSend:function(){l?o.prop("disabled",!0):h&&i.switchButtons(n,1)},success:function(r,s,a){var u=a.getResponseHeader("content-type");if(l)return n.triggerHandler("undo.qor.action",[o,d,r]),d?o.removeClass("is_undo"):o.addClass("is_undo"),void o.prop("disabled",!1);u.indexOf("json")>-1?(t(".qor-alert").remove(),h&&i.switchButtons(n),e=t(c?".qor-slideout":".mdl-layout__content"),e.find(".qor-page__body").prepend(i.renderFlashMessage(r))):window.location.reload()},error:function(t,e,r){l?o.prop("disabled",!1):h&&i.switchButtons(n),window.alert([e,r].join(": "))}}))):void window.alert(r.properties.errorNoItem)},switchButtons:function(t,e){var i=!!e;t.find(".qor-action-button").prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData("qor.action")},removeTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),t(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table").addClass("mdl-data-table--selectable"),new window.MaterialDataTable(t(".qor-page__body table").get(0)),t('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(t('thead:not(".is-hidden") tr'));var e=t('thead:not(".is-fixed") .mdl-checkbox__input'),i=t(".qor-table--medialibrary").length,n=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open");i&&(e=t("thead .mdl-checkbox__input")),e.on("click",function(){i||(t("thead.is-fixed tr th").eq(0).find("label").click(),t(this).closest("label").toggleClass("is-checked"));var e=t('[data-toggle="qor-action-slideout"]').find("form"),o=e.find(".js-primary-value");if(e.length&&n)if(t(this).is(":checked")){var r=t(".qor-table--bulking tbody tr");r.each(function(){var i=t(this).data("primary-key");i&&e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+i+'" />')})}else o.remove()})}},e.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert"><i class="material-icons">close</i></button><span class="qor-alert-message">[[#message]][[message]][[/message]][[#error]][[error]][[/error]]</span></div>',e.DEFAULTS={},t.fn.qorSliderAfterShow.qorActionInit=function(e,i){var n=t(i).find('[data-toggle="qor-action-slideout"]').length,o=t('[data-toggle="qor-action-slideout"]').find("form"),r=t(".qor-page__body .mdl-checkbox__input:checked");n&&r.length&&r.each(function(e,i){var n=t(i).parents("tbody tr").data("primary-key");n&&o.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+n+'" />')})},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.action");r||o.data("qor.action",r=new e(this,i)),"string"==typeof i&&t.isFunction(n=r[i])&&n.call(r)})},t(function(){var i={},o='[data-toggle="qor.action.bulk"]';t(document).on("disable.qor.action",function(i){e.plugin.call(t(o,i.target),"destroy")}).on("enable.qor.action",function(n){e.plugin.call(t(o,n.target),i)}).on(n,".qor-table__actions a[data-url],[data-url][data-method=POST],[data-url][data-method=PUT],[data-url][data-method=DELETE]",function(){return(new e).actionSubmit(this),!1}).triggerHandler("enable.qor.action")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.autoheight";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on("input",t.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,r=t(this),s=r.data(i);if(!s){if(/destroy/.test(n))return;r.data(i,s=new e(this,n))}"string"==typeof n&&t.isFunction(o=s[n])&&o.apply(s)})},t(function(){var n="textarea.qor-js-autoheight";t(document).on("disable."+i,function(i){e.plugin.call(t(n,i.target),"destroy")}).on("enable."+i,function(i){e.plugin.call(t(n,i.target))}).triggerHandler("enable."+i)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=i.exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function i(t,e,i){var n=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+n+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return i.match(o)?e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e?i+r+t+"="+e:void 0}function n(e,i){var n=[],o="href";return i&&(o="src"),e.each(function(){n.push(t(this).attr(o))}),c.uniq(n)}function o(e,i){var n=t.fn.qorSliderAfterShow;for(var o in n)n.hasOwnProperty(o)&&!n[o].isLoaded&&(n[o].isLoaded=!0,n[o].call(this,e,i))}function r(e,i,n){for(var r=0,s=0,a=e.length;s<a;s++){var l=document.createElement("script");l.onload=function(){r++,r===e.length&&t.isFunction(n)&&n(),i&&i.url&&i.response&&o(i.url,i.response)},l.src=e[s],document.body.appendChild(l)}}function s(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&s(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function a(e){var i=t("script"),o=n(e,!0),r=n(i,!0);return c.difference(o,r)}function l(e){var i=t("link"),o=n(e),r=n(i);return c.difference(o,r)}function d(e,i){this.$element=t(e),this.options=t.extend({},d.DEFAULTS,t.isPlainObject(i)&&i),this.disabled=!1,this.resourseData={},this.init()}var c=window._,h=window.FormData,u="qor.bottomsheets",f="click."+u;return d.prototype={constructor:d,init:function(){this.build(),this.bind()},build:function(){var e=t(".qor-bottomsheets");e.length&&e.remove(),this.$bottomsheets=e=t(d.TEMPLATE).appendTo("body"),this.$body=e.find(".qor-bottomsheets__body"),this.$title=e.find(".qor-bottomsheets__title"),this.$header=e.find(".qor-bottomsheets__header"),this.$bodyClass=t("body").prop("class"),this.filterURL="",this.searchParams=""},initBottomsheet:function(){},unbuild:function(){this.$body=null,this.$bottomsheets.remove()},bind:function(){this.$bottomsheets.on("submit."+u,"form",this.submit.bind(this)).on(f,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(f,".qor-pagination a",this.pagination.bind(this)).on(f,".qor-bottomsheets__search-button",this.search.bind(this)).on("keyup."+u,this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off("submit."+u,"form",this.submit.bind(this)).off(f,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(f,".qor-pagination a",this.pagination.bind(this)).off(f,".qor-bottomsheets__search-button",this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;i>=0;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find(".qor-bottomsheets__search-input");13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var e=this.$bottomsheets,i=e.data().url;if(void 0===i&&this.filterURL.length>1){var n=this.filterURL.split("?");i=n.length>=2?n[0]:this.filterURL}var o=t.trim(e.find(".qor-bottomsheets__search-input").val()),r=i+"?keyword="+o;this.reload(r)},pagination:function(e){var i=t(e.target),n=i.prop("href");return n&&this.reload(n),!1},reload:function(t){var e=this.$bottomsheets.find(".qor-page__body");this.addLoading(e),this.fetchPage(t)},fetchPage:function(e){var i=this.$bottomsheets,n=this;t.get(e,function(o){var r=t(o).find(".mdl-layout__content.qor-page"),s=r.find(".qor-page__header"),a=r.find(".qor-page__body");a.length?(i.find(".qor-page__body").html(a.html()),s.length&&(n.$body.find(".qor-page__header").html(s.html()).trigger("enable"),n.addHeaderClass()),i.trigger("reload."+u)):n.reload(e)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,n){var o,r,s=this.filterURL,a=this.$bottomsheets.data().url;if(!s){if(!a)return;s=a}return o=new URL("http://www.getqor.com/"+t),r=e(n,o.search),s=this.filterURL=i(n,r,s)},addHeaderClass:function(){this.$body.find(".qor-page__header").hide(),this.$bottomsheets.find(".qor-page__header").children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(".qor-page__header").show()},addLoading:function(e){e.html("");var i=t(d.TEMPLATE_LOADING).appendTo(e);window.componentHandler.upgradeElement(i.children()[0])},loadExtraResource:function(t){var e=l(t.$links),i=a(t.$scripts);e.length&&s(e),i.length&&r(i,t)},loadMedialibraryJS:function(e){var i,n=e.filter("script"),o=/theme=media_library/g,r=this;n.each(function(){if(i=t(this).prop("src"),o.test(i)){var e=document.createElement("script");e.src=i,document.body.appendChild(e),r.scriptAdded=!0}})},submit:function(e){var i=this.resourseData;if(!i.ingoreSubmit){var n=this.$body,o=e.target,r=t(o),s=this,a=i.ajaxType,l=r.find(":submit");r.data().normalSubmit||h&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new h(o),dataType:a||"html",processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0)},success:function(e){if(i.ajaxTakeover)return void i.$target.parent().trigger("ajaxSuccessed."+u,[e]);t(".qor-error").remove();var n=r.data("returnUrl"),o=r.data("refreshUrl");return o?void(window.location.href=o):"refresh"==n?void s.refresh():void(n&&"refresh"!=n?s.load(n):s.refresh())},error:function(e,i,o){var s;422===e.status?(n.find(".qor-error").remove(),s=t(e.responseText).find(".qor-error"),
r.before(s)):window.alert([i,o].join(": "))},complete:function(){l.prop("disabled",!1)}}))}},load:function(e,i,n){var o,r,s,a=this.options,l=i.actionData,c=this.resourseData,h=c.selectModal,f=c.ingoreSubmit,p=this.$bottomsheets,m=this.$header,y=this.$body;e&&(this.show(),this.addLoading(y),this.filterURL=e,y.removeClass("has-header has-hint"),i=t.isPlainObject(i)?i:{},o=i.method?i.method:"GET",r=i.datatype?i.datatype:"html",s=t.proxy(function(){t.ajax(e,{method:o,dataType:r,success:t.proxy(function(r){if("GET"===o){var s=t(r),b=void 0,g={$scripts:s.filter("script"),$links:s.filter("link")},v=h&&s.find(".qor-search-container").length;if(b=s.find(".mdl-layout__content.qor-page"),!b.length)return;this.loadExtraResource(g),f&&b.find(".qor-page__header").remove(),b.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),y.html(b.html()),this.$title.html(s.find(a.title).html()),h&&(y.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",c.selectId),"one"==h||void 0!==c.maxItem&&"1"==c.maxItem||y.addClass("has-hint"),"mediabox"!=h||this.scriptAdded||this.loadMedialibraryJS(s)),m.find(".qor-button--new").remove(),this.$title.after(y.find(".qor-button--new")),v&&(p.addClass("has-search"),m.find(".qor-bottomsheets__search").remove(),m.prepend(d.TEMPLATE_SEARCH)),l&&l.length&&this.bindActionData(l),p.trigger("enable"),p.one("hidden."+u,function(){t(this).trigger("disable")}),this.addHeaderClass(),p.data(g),n&&t.isFunction(n)&&n(),p.trigger("bottomsheetLoaded."+u,[e,r])}else i.returnUrl?this.load(i.returnUrl):this.refresh()},this),error:t.proxy(function(){this.hide();var e;e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(e)},this)})},this),s())},open:function(t,e){this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),t("body").addClass("qor-bottomsheets-open")},hide:function(){var e,i=this.$bottomsheets,n=t(".qor-datepicker").not(".hidden");if(n.length&&n.addClass("hidden"),e=t.Event("hide."+u),i.trigger(e),!e.isDefaultPrevented())return i.removeClass("is-slided").removeClass("is-shown").trigger("hidden."+u),t("body").removeClass("qor-bottomsheets-open"),i.qorSelectCore("destroy"),i.trigger("bottomsheetClosed."+u),this.init(),!1},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(u)}},d.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},d.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',d.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',d.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search"><input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" /><button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button></div>',d.TEMPLATE='<div class="qor-bottomsheets"><div class="qor-bottomsheets__header"><h3 class="qor-bottomsheets__title"></h3><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets"><span class="material-icons">close</span></button></div><div class="qor-bottomsheets__body"></div></div>',d.plugin=function(e){return this.each(function(){var i,n=t(this),o=n.data(u);if(!o){if(/destroy/.test(e))return;n.data(u,o=new d(this,e))}"string"==typeof e&&t.isFunction(i=o[e])&&i.apply(o)})},t.fn.qorBottomSheets=d.plugin,d});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}return e.prototype={constructor:e,init:function(){var e,i=this.$element,n=i.data("remote-data"),o={minimumResultsForSearch:8,dropdownParent:i.parent()};n&&(o.ajax=t.fn.select2.ajaxCommonOptions,o.templateResult=function(e){var n=i.parents(".qor-field").find('[name="select2-result-template"]');return t.fn.select2.ajaxFormatResult(e,n)},o.templateSelection=function(e){if(e.loading)return e.text;var n=i.parents(".qor-field").find('[name="select2-selection-template"]');return t.fn.select2.ajaxFormatResult(e,n)}),i.on("select2:select",function(e){t(e.target).attr("chooser-selected","true")}).on("select2:unselect",function(e){t(e.target).attr("chooser-selected","")}),i.select2(o),this.resetSelect2Width(),e=window._.debounce(this.resetSelect2Width.bind(this),300),t(window).resize(e),i.val()&&i.attr("chooser-selected","true")},resetSelect2Width:function(){var t,e=this.$element.data().select2;e&&e.$container&&(t=e.$container,t.width(t.parent().width()))},destroy:function(){this.$element.select2("destroy").removeData("qor.chooser")}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.chooser");if(!r){if(/destroy/.test(i))return;o.data("qor.chooser",r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on("disable.qor.chooser",function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable.qor.chooser",function(n){e.plugin.call(t(i,n.target))}).triggerHandler("enable.qor.chooser")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[String(i).toLowerCase()]=e[i]);return n}function n(i,n){var o=String(n),r=o.toLowerCase(),s=o.toUpperCase(),a=e(o);if(t.isPlainObject(i))return i[r]||i[a]||i[s]}function o(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]="");return t}function r(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function s(e,i){this.$element=t(e),this.options=t.extend(!0,{},s.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var a=window.URL||window.webkitURL,l="qor.cropper",d="click."+l;return s.prototype={constructor:s,init:function(){var e,i,n,o,r=this.options,s=this.$element,a=s.closest(r.parent),l=this;a.length||(a=s.parent()),this.$parent=a,this.$output=a.find(r.output),this.$list=a.find(r.list),n=this.$output.data("fetchSizedata"),n?t.getJSON(n,function(t){o=JSON.parse(t.MediaOption),l.$output.val(JSON.stringify(t)),l.data=o||{},l.build(),l.bind()}):(i=t.trim(this.$output.val()),i&&(e=JSON.parse(i)),this.data=e||{},this.build(),this.bind())},build:function(){var e,i=this.$output.data(),n={};i&&(n={title:i.cropperTitle,ok:i.cropperOk,cancel:i.cropperCancel},e=this.options.text),n.ok&&n.title&&n.cancel&&(e=n),this.wrap(),this.$modal=t(r(s.MODAL,e)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t,e=this.$list;e.find("li").append(s.TOGGLE),t=e.find("img"),t.length?(t.wrap(s.CANVAS),this.center(t)):e.find(".qor-cropper__toggle--crop").remove()},unwrap:function(){var e=this.$list;e.find(".qor-cropper__toggle").remove(),e.find(".qor-cropper__canvas").each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on("change."+l,t.proxy(this.read,this)),this.$list.on(d,t.proxy(this.click,this)),this.$modal.on("shown.qor.modal",t.proxy(this.start,this)).on("hidden.qor.modal",t.proxy(this.stop,this))},unbind:function(){this.$element.off("change."+l,this.read),this.$list.off(d,this.click),this.$modal.off("shown.qor.modal",this.start).off("hidden.qor.modal",this.stop)},click:function(e){var i,n,o=e.target,r=this.data;o!==this.$list[0]&&(i=t(o),i.closest(".qor-cropper__toggle--delete").length&&(r.Delete=!0,this.$output.val(JSON.stringify(r)),this.$list.hide(),n=t(s.ALERT),n.find(".qor-fieldset__undo").one(d,function(){n.remove(),this.$list.show(),delete r.Delete,this.$output.val(JSON.stringify(r))}.bind(this)),this.$parent.find(".qor-fieldset").append(n)),i.closest(".qor-cropper__toggle--crop").length&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e,i=t.target.files,n=this.$parent.find(".qor-fieldset__alert");n.length&&(n.remove(),this.data=o(this.data)),i&&i.length&&(e=i[0],/^image\/\w+$/.test(e.type)&&a?(this.load(a.createObjectURL(e)),this.$parent.find(".qor-medialibrary__image-desc").show()):this.$list.empty().html(s.FILE_LIST.replace("{{filename}}",e.name)))},load:function(e,i){var o,r,a=this.options,l=this,d=this.$list,c=d.find("ul"),h=this.data||{};c.length&&c.find("li").length||(c=t(s.LIST),d.html(c),this.wrap()),c.show(),o=d.find("img"),r=o.length,o.one("load",function(){var e,o=t(this),s=this.naturalWidth,d=this.naturalHeight,c=o.data(),u=c.sizeResolution,f=c.sizeName,p={},m={},y=c.sizeResolutionWidth,b=c.sizeResolutionHeight;u?(y||b||(y=n(u,"width"),b=n(u,"height")),e=y/b,d*e>s?(y=s,b=y/e):(b=d,y=b*e),p={naturalWidth:s,naturalHeight:d},m={x:Math.round((s-y)/2),y:Math.round((d-b)/2),width:Math.round(y),height:Math.round(b)},l.preview(o,p,m),f&&(h.crop=!0,h[a.key]||(h[a.key]={}),h[a.key][f]=m)):l.center(o),l.$output.val(JSON.stringify(h)),f&&h[a.key]&&Object.keys(h[a.key]).length>=r&&i&&t.isFunction(i)&&i()}).attr("src",e).data("originalUrl",e),d.show()},start:function(){var e,o=this.options,r=this.$modal,s=this.$target,a=s.data(),l=a.sizeName||"original",c=a.sizeResolution,h=t("<img>").attr("src",a.originalUrl),u=this.data||{},f=this,p=NaN,m=a.sizeResolutionWidth,y=a.sizeResolutionHeight;c&&(m||y||(m=n(c,"width"),y=n(c,"height")),p=m/y),u[o.key]||(u[o.key]={}),r.trigger("enable.qor.material").find(".qor-cropper__wrapper").html(h),e=this.getList(p),e&&r.find(".qor-cropper__options").show().append(e),h.cropper({aspectRatio:p,data:i(u[o.key][l]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,autoCropArea:1,built:function(){r.find(".qor-cropper__options-toggle").on(d,function(){r.find(".qor-cropper__options-input").prop("checked",t(this).prop("checked"))}).prop("checked",!0),r.find(".qor-cropper__save").one(d,function(){var e=h.cropper("getData",!0),i=h.cropper("getCroppedCanvas"),n=[],s=void 0;u.crop=!0,u[o.key][l]=e,f.imageData=h.cropper("getImageData"),f.cropData=e,i&&(s=i.toDataURL()),r.find(".qor-cropper__options input").each(function(){var e=t(this);e.prop("checked")&&n.push(e.attr("name"))}),f.output(s,n),r.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(".qor-cropper__wrapper > img").cropper("destroy").remove().end().find(".qor-cropper__options").hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var o=t(this).data(),r=o.sizeResolution,s=o.sizeName,a=o.sizeResolutionWidth,l=o.sizeResolutionHeight;r&&(a||l||(a=n(r,"width"),l=n(r,"height")),a/l===e&&i.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+s+'" checked> <span>'+s+"<small>("+a+"&times;"+l+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var n=this.$target;e?this.center(n.attr("src",e),!0):this.preview(n),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data)).trigger("change."+l)},preview:function(e,i,n){var o,r=e.parent(),s=r.parent(),a=s.width(),l=s.height(),d=i||this.imageData,c=t.extend({},n||this.cropData),h=c.width/c.height,u=a;0!=u&&0!=d.naturalWidth&&0!=d.naturalHeight&&(l*h<=a&&(u=l*h),o=c.width/u,e.css({maxWidth:d.naturalWidth/o,maxHeight:d.naturalHeight/o}),this.center(e))},center:function(e,i){e.each(function(){function e(){var t=r.height(),e=o.height(),i="auto";e<t&&(i=(t-e)/2),o.css("margin-top",i)}var n=t(this),o=n.parent(),r=o.parent();i&&o.add(n).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var n=this.cropData,o=this.data[this.options.key],r=this;this.$list.find("img").not(this.$target).each(function(){var s=t(this),a=s.data("sizeName");t.inArray(a,i)>-1&&(o[a]=t.extend({},n),e?r.center(s.attr("src",e),!0):r.preview(s))})},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(l)}},s.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},s.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',s.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',s.CANVAS='<div class="qor-cropper__canvas"></div>',s.LIST="<ul><li><img></li></ul>",s.FILE_LIST='<div class="qor-file__list-item"><span><span>{{filename}}</span></span>',s.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',s.plugin=function(e){return this.each(function(){var i,n,o=t(this),r=o.data(l);if(!r){if(!t.fn.cropper)return;if(/destroy/.test(e))return;i=t.extend(!0,{},o.data(),"object"===(void 0===e?"undefined":_typeof(e))&&e),o.data(l,r=new s(this,i))}"string"==typeof e&&t.isFunction(n=r[e])&&n.apply(r)})},t(function(){var e={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on("enable."+l,function(i){s.plugin.call(t(".qor-file__input",i.target),e)}).on("disable."+l,function(e){s.plugin.call(t(".qor-file__input",e.target),"destroy")}).triggerHandler("enable."+l)}),s});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function i(e,n){this.$element=t(e),this.options=t.extend(!0,{},i.DEFAULTS,t.isPlainObject(n)&&n),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}var n="qor.datepicker";return i.prototype={init:function(){this.bind()},bind:function(){this.$element.on("click."+n,t.proxy(this.show,this))},unbind:function(){this.$element.off("click."+n,this.show)},build:function(){var o=void 0,r=this.$element,s=this.pickerData,a=r.val()?new Date(r.val()):new Date,l={date:a,inline:!0},d=r.closest("[data-picker-type]"),c=d.find(s.targetInput);this.built||(this.$modal=o=t(e(i.TEMPLATE,this.options.text)).appendTo("body"),c.length&&(l.date=c.val()?new Date(c.val()):new Date),s.targetInput&&c.data("start-date")&&(l.startDate=new Date),o.find(".qor-datepicker__embedded").on("pick."+n,t.proxy(this.change,this)).qorDatepicker(l).triggerHandler("pick."+n),o.find(".qor-datepicker__save").on("click."+n,t.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(".qor-datepicker__embedded").off("pick."+n,this.change).qorDatepicker("destroy").end().find(".qor-datepicker__save").off("click."+n,this.pick).end().remove()},change:function(e){var i,n=this.$modal,o=t(e.target);this.date=i=o.qorDatepicker("getDate"),this.formatDate=o.qorDatepicker("getDate",!0),n.find(".qor-datepicker__picked-year").text(i.getFullYear()),n.find(".qor-datepicker__picked-date").text([o.qorDatepicker("getDayName",i.getDay(),!0)+",",String(o.qorDatepicker("getMonthName",i.getMonth(),!0)),i.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.pickerData.targetInput,e=this.$element,i=e.closest("[data-picker-type]"),n=t?i.find(t):e,o=i.data("picker-type"),r=this.formatDate;if("datetime"===o){var s=/^\d{4}-\d{1,2}-\d{1,2}/,a=n.val();s.test(a)?r=a.replace(s,r):r+=" 00:00"}n.val(r).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(n)}},i.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},i.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',i.plugin=function(e){return this.each(function(){var o,r,s=t(this),a=s.data(n);if(!a){if(!t.fn.qorDatepicker)return;if(/destroy/.test(e))return;o=t.extend(!0,{},s.data(),"object"===(void 0===e?"undefined":_typeof(e))&&e),s.data(n,a=new i(this,o))}"string"==typeof e&&t.isFunction(r=a[e])&&r.apply(a)})},t(function(){var e='[data-toggle="qor.datepicker"]';t(document).on("disable."+n,function(n){i.plugin.call(t(e,n.target),"destroy")}).on("enable."+n,function(n){i.plugin.call(t(e,n.target))}).triggerHandler("enable."+n)}),i});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){var e=function e(i,n){var o=!1;return this instanceof jQuery?(n=i,i=this):i instanceof jQuery||(i=t(i)),i.each(function(i,r){var s=t(r);if(s.is("form")){if(s.hasClass("ignore-dirtyform"))return!1;if(o=e(s.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),n))return!1}else if(s.is(":checkbox")||s.is(":radio")){if(r.checked!=r.defaultChecked)return o=!0,!1}else if(s.is("input")||s.is("textarea")){if(r.value!=r.defaultValue)return o=!0,!1}else if(s.is("select")){for(var a,l=0,d=r.options.length,c=0;c<d;c++)a=r.options[c],o=o||a.selected!=a.defaultSelected,a.defaultSelected&&(l=c);if(o&&!r.multiple&&(o=l!=r.selectedIndex),o)return!1}}),o};t.fn.extend({dirtyForm:e}),t(function(){t(document).on("submit","form",function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null}),t(document).on("change","form",function(){t(this).dirtyForm()?(t.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(t.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=t(document),o="click.qor.filter";return e.prototype={constructor:e,init:function(){this.bind();var t=this.$element;this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=window.moment().startOf("isoweek").toDate(),this.endWeekDate=window.moment().endOf("isoweek").toDate(),this.startMonthDate=window.moment().startOf("month").toDate(),this.endMonthDate=window.moment().endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(o,t.trigger,this.show.bind(this)).on(o,t.label,this.setFilterTime.bind(this)).on(o,t.clear,this.clear.bind(this)).on(o,t.button,this.search.bind(this)),n.on(o,this.close)},unbind:function(){var t=this.options;this.$element.off(o,t.trigger,this.show.bind(this)).off(o,t.label,this.setFilterTime.bind(this)).off(o,t.clear,this.clear.bind(this)).off(o,t.button,this.search.bind(this))},initActionTemplate:function(){var e=this.getUrlParameter("schedule_start_at"),i=this.getUrlParameter("schedule_end_at"),n=t(this.options.trigger);(e||i)&&(this.$timeStart.val(e),this.$timeEnd.val(i),i=i?" - "+i:"",n.addClass("active clearable").find(".qor-selector-label").html(e+i),n.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(".qor-filter__dropdown").toggle()},close:function(e){var i=t(e.target),n=t(".qor-filter__dropdown"),o=n.is(":visible"),r=i.closest(".qor-filter__dropdown").length,s=i.closest(".qor-filter-toggle").length,a=i.closest(".qor-modal").length,l=i.closest(".ui-timepicker-wrapper").length;o&&(r||s||a||l)||n.hide()},setFilterTime:function(e){var i,n,o,r,s=t(e.target),a=s.data(),l=a.filterRange;if(!l)return!1;if(t(this.options.label).removeClass("is-selected"),s.addClass("is-selected"),"events"==l)return this.$timeStart.val(a.scheduleStartAt||""),this.$timeEnd.val(a.scheduleEndAt||""),this.$searchButton.click(),!1;switch(l){case"today":o=r=new Date;break;case"week":o=this.startWeekDate,r=this.endWeekDate;break;case"month":o=this.startMonthDate,r=this.endMonthDate}if(!o||!r)return!1;i=this.getTime(o)+" 00:00",n=this.getTime(r)+" 23:59",this.$timeStart.val(i),this.$timeEnd.val(n),this.$searchButton.click()},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var e=t(this.options.trigger),i=e.find(".qor-selector-label");return e.removeClass("active clearable"),i.html(i.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=i.search;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=n.exec(e);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,n){var o=n||i.href,r=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp("([?&])"+r+"=.*?(&|$)","i"),a=-1!==o.indexOf("?")?"&":"?";return o.match(s)?e?o.replace(s,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?o.replace(s,"$1"):o.replace(s,""):e?o+a+t+"="+e:o},search:function(){var e,n=this.$searchParam,o=this;n.length&&(n.each(function(){var i=t(this),n=i.data().searchParam,r=i.val();e=o.updateQueryStringParameter(n,r,e)}),this.$element.closest(".qor-bottomsheets").length?t(".qor-bottomsheets").trigger("filterChanged.qor.filter",[e,"qor.filter.time"]):i.href=e)},destroy:function(){this.unbind(),this.$element.removeData("qor.filter")}},e.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.filter");if(!r){if(/destroy/.test(i))return;o.data("qor.filter",r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.filter.time"]',n={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};t(document).on("disable.qor.filter",function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable.qor.filter",function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler("enable.qor.filter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}function i(e,i){var r,s=o.search;return t.isArray(e)&&(r=n(s),t.each(e,function(e,n){e=t.inArray(n,r),-1===e?r.push(n):i&&r.splice(e,1)}),s="?"+r.join("&")),s}function n(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,n=[];if(e=e.split("="),!/page/.test(e[0]))return i=e[1],n.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)))&&n.push(i),n.join("=")}))),i}var o=window.location,r="qor.filter";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on("click.qor.filter",e.label,t.proxy(this.toggle,this)).on("change.qor.filter",e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off("click.qor.filter",this.toggle).off("change.qor.filter",this.toggle)},toggle:function(e){var r,s,a,l,d,c,h,u,f=t(e.currentTarget),p=[];f.is("select")?(r=n(o.search),u=l=f.attr("name"),d=f.val(),s=[l],d&&s.push(d),s=s.join("="),d&&p.push(s),f.children().each(function(){var e=t(this),i=[l],n=t.trim(e.prop("value"));if(n&&i.push(n),i=i.join("="),(c=t.inArray(i,r))>-1)return h=i,!1}),h?(p.push(h),a=i(p,!0)):a=i(p)):f.is("a")&&(e.preventDefault(),u=f.data().paramName,p=n(f.attr("href")),a=f.hasClass("is-active")?i(p,!0):i(p)),this.$element.closest(".qor-bottomsheets").length?t(".qor-bottomsheets").trigger("filterChanged.qor.filter",[a,u]):o.search=a},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),s=o.data(r);if(!s){if(/destroy/.test(i))return;o.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(n=s[i])&&n.apply(s)})},t(function(){var i='[data-toggle="qor.filter"]',n={label:"a",group:"select"};t(document).on("disable.qor.filter",function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable.qor.filter",function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler("enable.qor.filter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i=t(window),n=window._;return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;this.buildCheck()||(this.$thead=i.find("thead:first"),this.$tbody=i.find("tbody:first"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.fixedHeaderWidth=[],this.isEqualed=!1,this.resize(),this.bind())},bind:function(){this.$element.on("click.qor.fixer",t.proxy(this.check,this)),this.$content.on("scroll.qor.fixer",t.proxy(this.toggle,this)),i.on("resize.qor.fixer",t.proxy(this.resize,this))},unbind:function(){this.$element.off("click.qor.fixer",this.check),this.$content.off("scroll.qor.fixer",this.toggle).off("resize.qor.fixer",this.resize)},build:function(){if(this.$content.length){var e=this.$element,i=this.$thead,n=this.$clone,o=this,r=i.find("> tr").children(),s=this.$content.offset().top+t(".qor-page__header").height();n||(this.$clone=n=i.clone().prependTo(e).css({top:s})),n.addClass(["is-fixed","is-hidden"].join(" ")).find("> tr").children().each(function(e){t(this).outerWidth(r.eq(e).outerWidth()),o.fixedHeaderWidth.push(t(this).outerWidth())})}},unbuild:function(){this.$clone.remove()},buildCheck:function(){var e=this.$element;return!!(t(".qor-page__body .qor-js-table").length>1||t(".qor-global-search--container").length>0||e.hasClass("qor-table--medialibrary")||e.is(":hidden")||e.find("tbody > tr:visible").length<=1)},check:function(e){var i,n=t(e.target);n.is(".qor-js-check-all")&&(i=n.prop("checked"),n.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",i).closest(".mdl-checkbox").toggleClass("is-checked",i))},toggle:function(){if(this.$content.length){var e=this,i=this.$clone,o=this.$thead,r=this.$content.scrollTop(),s=this.$content.scrollLeft(),a=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,l=t(".qor-page__header").outerHeight();if(!this.isEqualed){this.headerWidth=[];o.find("> tr").children().each(function(){e.headerWidth.push(t(this).outerWidth())});n.difference(e.fixedHeaderWidth,e.headerWidth).length&&(t("thead.is-fixed").find(">tr").children().each(function(i){t(this).outerWidth(e.headerWidth[i])}),this.isEqualed=!0)}r>a-l?i.css({"margin-left":-s}).removeClass("is-hidden"):i.css({"margin-left":"0"}).addClass("is-hidden")}},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.unbuild(),this.$element.removeData("qor.fixer"))}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.fixer")
;r||o.data("qor.fixer",r=new e(this,i)),"string"==typeof i&&t.isFunction(n=r[i])&&n.call(r)})},t(function(){var i={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on("disable.qor.fixer",function(i){e.plugin.call(t(".qor-js-table",i.target),"destroy")}).on("enable.qor.fixer",function(n){e.plugin.call(t(".qor-js-table",n.target),i)}).triggerHandler("enable.qor.fixer")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){n&&(t(e).is(o)?n.upgradeElements(e):n.upgradeElements(t(o,e).toArray()))}function i(e){n&&(t(e).is(o)?n.downgradeElements(e):n.downgradeElements(t(o,e).toArray()))}var n=window.componentHandler,o='[class*="mdl-js"]';t(function(){t(document).on("enable.qor.material",function(t){e(t.target)}).on("disable.qor.material",function(t){i(t.target)}).on("update.qor.material",function(t){i(t.target),e(t.target)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),n="qor.modal";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on("click.qor.modal",t.proxy(this.click,this)),this.options.keyboard&&i.on("keyup.qor.modal",t.proxy(this.keyup,this))},unbind:function(){this.$element.off("click.qor.modal",this.click),this.options.keyboard&&i.off("keyup.qor.modal",this.keyup)},click:function(e){var i=this.$element[0],n=e.target;if(n===i&&this.options.backdrop)return void this.hide();for(;n!==i;){if("modal"===t(n).data("dismiss")){this.hide();break}n=n.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var n,o=this.$element;if(!this.transitioning&&!o.hasClass("in")&&(n=t.Event("show.qor.modal"),o.trigger(n),!n.isDefaultPrevented())){if(i.find("body").addClass("qor-modal-open"),o.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return o.addClass("in"),void this.shown();o.one("transitionend",t.proxy(this.shown,this)),o.addClass("in")}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr("aria-hidden",!1).trigger("shown.qor.modal").focus()},hide:function(e){var n,o=this.$element;if(!this.transitioning&&o.hasClass("in")&&(n=t.Event("hide.qor.modal"),o.trigger(n),!n.isDefaultPrevented())){if(i.find("body").removeClass("qor-modal-open"),this.transitioning=!0,e||!this.fadable)return o.removeClass("in"),void this.hidden();o.one("transitionend",t.proxy(this.hidden,this)),o.removeClass("in")}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr("aria-hidden",!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass("in")?this.hide():this.show()},destroy:function(){this.$element.removeData(n)}},e.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},e.plugin=function(i){return this.each(function(){var o,r=t(this),s=r.data(n);if(!s){if(/destroy/.test(i))return;r.data(n,s=new e(this,i))}"string"==typeof i&&t.isFunction(o=s[i])&&o.apply(s)})},t.fn.qorModal=e.plugin,t(function(){t(document).on("click.qor.modal",'[data-toggle="qor.modal"]',function(){var i=t(this),o=i.data(),r=t(o.target||i.attr("href"));e.plugin.call(r,r.data(n)?"toggle":o)}).on("disable.qor.modal",function(i){e.plugin.call(t(".qor-modal",i.target),"destroy")}).on("enable.qor.modal",function(i){e.plugin.call(t(".qor-modal",i.target))})}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.tabbar.radio";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on("click."+i,"[data-tab-target]",this.switchTab.bind(this))},unbind:function(){this.$element.off("click."+i,"[data-tab-target]",this.switchTab)},switchTab:function(e){var n=t(e.target),o=this.$element,r=o.find("[data-tab-target]"),s=o.find("[data-tab-source]"),a=n.data(),l=a.tabTarget;n.hasClass("is-active")||(r.removeClass("is-active"),n.addClass("is-active"),s.hide().filter('[data-tab-source="'+l+'"]').show(),o.trigger("switched."+i,[o,l]))},destroy:function(){this.unbind()}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,r=t(this),s=r.data(i);if(!s){if(/destroy/.test(n))return;r.data(i,s=new e(this,n))}"string"==typeof n&&t.isFunction(o=s[n])&&o.apply(s)})},t(function(){var n='[data-toggle="qor.tab.radio"]';t(document).on("disable."+i,function(i){e.plugin.call(t(n,i.target),"destroy")}).on("enable."+i,function(i){e.plugin.call(t(n,i.target))}).triggerHandler("enable."+i)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function n(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function o(e){var i,o={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(o[n(i)]=e[i]);return o}function r(e,i){return"string"==typeof e&&"object"===(void 0===i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("$["+String(t).toLowerCase()+"]",i)}),e}function s(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function a(t,e){var i=t.find(".redactor-toolbar"),n=t.offset().top,o=t.height(),r={position:"relative",top:"auto",width:"auto",boxShadow:"none"},s={position:"fixed",boxShadow:"0 2px 4px rgba(0,0,0,.1)",top:e,width:t.width()};"relative"===i.css("position")&&(o=t.height()-50),n<e?o-50-e<Math.abs(n)?i.css(r):i.css(s):i.css(r)}function l(e,i){this.$element=t(e),this.options=t.extend(!0,{},l.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var d="qor.redactor",c="click."+d;return l.prototype={constructor:l,init:function(){var e=this.options,i=this.$element,n=i.closest(e.parent);n.length||(n=i.parent()),this.$parent=n,this.$button=t(l.BUTTON),this.$modal=t(r(l.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){this.$element.on("addCrop."+d,t.proxy(this.addButton,this)).on("removeCrop."+d,t.proxy(this.removeButton,this))},unbind:function(){this.$element.off("addCrop."+d).off("removeCrop."+d).off("scroll."+d)},addButton:function(e,i){var n=t(i);this.$button.css("left",t(i).width()/2).prependTo(n.parent()).find(".qor-cropper__toggle--redactor").one(c,t.proxy(this.crop,this,n))},removeButton:function(){this.$button.find(".qor-cropper__toggle--redactor").off(c),this.$button.detach()},crop:function(n){var r=this.options,s=n.attr("src"),a=s,l=t("<img>"),d=this.$modal;t.isFunction(r.replace)&&(a=r.replace(a)),l.attr("src",a),d.one("shown.qor.modal",function(){l.cropper({data:i(n.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){d.find(".qor-cropper__save").one(c,function(){var i=l.cropper("getData",!0);t.ajax(r.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:s,CropOptions:{original:o(i)},Crop:!0}),dataType:"json",success:function(o){t.isPlainObject(o)&&o.url&&(n.attr("src",o.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(r.complete)&&r.complete(),d.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){l.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(d)}},l.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},l.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',l.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',l.plugin=function(e){return this.each(function(){var i=t(this),n=i.data(d),o=void 0,r=void 0;if(n)/destroy/.test(e)&&i.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;i.data(d,n={}),o={imageUpload:i.data("uploadUrl"),fileUpload:i.data("uploadUrl"),imageResizable:!0,imagePosition:!0,toolbarFixed:!1,callbacks:{init:function(){var e=void 0,o=this.core.box(),r=t(".qor-slideout").is(":visible"),s=void 0,c=64;["html","format","bold","italic","deleted","lists","image","file","link","horizontalrule","table"].forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),r?(s=".qor-slideout",c=t(".qor-slideout__header").height()):(s=".qor-layout main.qor-page",c+=t(s).find(".qor-page__header").height()),t(s).on("scroll."+d,function(){a(o,c)}),i.data("cropUrl")&&i.data(d,n=new l(i,{remote:i.data("cropUrl"),text:i.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},imageUpload:function(e,i){var n=t(e);i.filelink&&n.prop("src",i.filelink)},click:function(e){var i=t(this.selection.parent());i.is(".redactor-layer")&&(i=t(this.selection.current())),this.selection.$currentTag=i,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=t(e.target))},modalOpened:function(e,i){var n=this;"link"==e&&(t(i).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=t("#redactor-link-url-text").val(),this.link.description=t("#redactor-link-title").val(),t("#redactor-link-title").off("keyup."+d),t("#redactor-link-url-text").off("keyup."+d),t("#redactor-modal-button-cancel").off(c),t("#redactor-modal-button-cancel").on(c,function(){n.link.clickCancel=!0}),t("#redactor-link-title").on("keyup."+d,function(){n.link.valueChanged=!0,n.link.description=s(t(this).val())}),t("#redactor-link-url-text").on("keyup."+d,function(){n.link.valueChanged=!0,n.link.linkUrlText=s(t(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(e){var i=t(e),n=this.link.description;i.prop("title",n||i.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(e,i){t(e).prop("href",i.filelink).html(i.filename)}}},t.extend(o,i.data("redactorSettings")),i.redactor(o)}"string"==typeof e&&t.isFunction(r=n[e])&&r.apply(n)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on("disable."+d,function(i){l.plugin.call(t(e,i.target),"destroy")}).on("enable."+d,function(i){l.plugin.call(t(e,i.target))}).triggerHandler("enable."+d)}),l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.index=0,this.init()}var i="qor.replicator",n="click."+i;return e.prototype={constructor:e,init:function(){var e=this,i=this.$element,n=i.find("> .qor-field__block > .qor-fieldset--new"),o=void 0;this.isInSlideout=i.closest(".qor-slideout").length,this.hasInlineReplicator=i.parents(".qor-fieldset-container").length||i.find(".qor-fieldset-container").length,n.length&&!i.closest(".qor-fieldset--new").length&&(n.trigger("disable"),this.isMultipleTemplate=i.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index={},n.each(function(i,n){(o=t(n).data("fieldsetName"))&&(e.template[o]=t(n).prop("outerHTML"),e.fieldsetName.push(o))}),this.parseMultiple()):(this.template=n.prop("outerHTML"),this.parse()),n.hide(),this.bind())},parse:function(){var t=void 0;this.template&&(t=this.initTemplate(this.template),this.template=t.template,this.index=t.index)},initTemplate:function(t){var e=void 0,i=this.hasInlineReplicator;return t=t.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,n,o){return o=o.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,r,s,a){if(t===o)return"name"!==n||e||(e=s),!i&&/\[\d+\]/.test(r)?t.replace(/\[\d+\]/,"[{{index}}]"):r+"[{{index}}]"+a}),n+'="'+o+'"'}),{template:t,index:parseFloat(e)}},parseMultiple:function(){for(var t=void 0,e=void 0,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index[e]=t.index},bind:function(){var e=this.options;this.$element.on(n,e.addClass,t.proxy(this.add,this)).on(n,e.delClass,t.proxy(this.del,this)),!this.isInSlideout&&t(document).on("submit","form",this.removeData.bind(this)),t(document).on("slideoutBeforeSend.qor.slideout",".qor-slideout",this.removeData.bind(this))},unbind:function(){this.$element.off(n,this.add).off(n,this.del),!this.isInSlideout&&t(document).off("submit","form",this.removeData.bind(this)),t(document).off("slideoutBeforeSend.qor.slideout",".qor-slideout",this.removeData.bind(this))},removeData:function(){this.$element.find(".qor-fieldset--new").remove()},add:function(e,n,o){var r,s,a=this.options;if(!o)var l=t(e.target).closest(a.addClass),d=l.data("template"),c=l.closest(this.$element),h=c.children(a.childrenClass),u=l.closest(a.childrenClass).children("fieldset");if(this.isMultipleTemplate){this.parseNestTemplate(d),s=this.template[d],r=t(s.replace(/\{\{index\}\}/g,this.index[d]));for(var f in l.data())if(f.match(/^sync/)){var p=f.replace(/^sync/,"");r.find("input[name*='."+p+"']").val(l.data(f))}u.length?u.last().after(r.show()):h.prepend(r.show()),r.data("itemIndex",this.index[d]).removeClass("qor-fieldset--new"),this.index[d]++}else o?n&&n.length&&(this.addMultiple(n),t(document).trigger("addedMultipleDone."+i)):(r=this.addSingle(),l.before(r.show()),this.index++);o||(r.trigger("enable"),t(document).trigger("added."+i,[r]),e.stopPropagation())},addMultiple:function(e){for(var n=void 0,o=0,r=e.length;o<r;o++)n=this.addSingle(),this.index++,t(document).trigger("addedMultiple."+i,[n,e[o]])},addSingle:function(){var e=void 0;return e=t(this.template.replace(/\{\{index\}\}/g,this.index)),e.data("itemIndex",this.index).removeClass("qor-fieldset--new"),e},del:function(e){var i=this.options,o=t(e.target).closest(i.itemClass),r=void 0;o.children(":visible").addClass("hidden").hide(),r=t(i.alertTemplate.replace("{{name}}",this.parseName(o))),r.find(i.undoClass).one(n,function(){o.find("> .qor-fieldset__alert").remove(),o.children(".hidden").removeClass("hidden").show()}),o.append(r)},parseNestTemplate:function(t){var e=this.$element,i=e.parents(".qor-fieldset-container"),n=void 0;i.length&&(n=e.closest(".qor-fieldset").data("itemIndex"))&&(t?this.template[t]=this.template[t].replace(/\[\d+\]/g,"["+n+"]"):this.template=this.template.replace(/\[\d+\]/g,"["+n+"]"))},parseName:function(t){var e=t.find("input[name]").attr("name");if(e)return e.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(i)}},e.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},e.plugin=function(n){return this.each(function(){var o=t(this),r=o.data(i),s=void 0;r||o.data(i,r=new e(this,n)),"string"==typeof n&&t.isFunction(s=r[n])&&s.call(r)})},t(function(){var n={};t(document).on("disable."+i,function(i){e.plugin.call(t(".qor-fieldset-container",i.target),"destroy")}).on("enable."+i,function(i){e.plugin.call(t(".qor-fieldset-container",i.target),n)}).triggerHandler("enable."+i)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=window.componentHandler,o=window.history,r="qor.globalSearch",s=".qor-global-search--results";return e.prototype={constructor:e,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on("click."+r,t.proxy(this.click,this))},unbind:function(){this.$element.off("click."+r,this.check)},initTab:function(){var e,n=i.search;/resource_name/.test(n)&&(e=n.match(/resource_name=\w+/g).toString().split("=")[1],t(".qor-global-search--resource").removeClass("is-active"),t('[data-resource="'+e+'"]').addClass("is-active"))},click:function(e){var n=t(e.target),r=n.data();if(n.is(".qor-global-search--resource")){var s,a=i.href.replace(/#/g,""),l=r.resource,d=/resource_name/.test(a),c=/keyword/.test(a),h="resource_name="+l,u=c?"&":"?keyword=&";s=l?d?a.replace(/resource_name=\w+/g,h):a+u+h:a.replace(/&resource_name=\w+/g,""),o.pushState?this.fetchSearch(s,n):i.href=s}},fetchSearch:function(e,i){var r=document.title;t.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){t(".mdl-spinner").remove(),t(s).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),n.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(a){var l=t(a).find(s).html();t(".qor-global-search--resource").removeClass("is-active"),i.addClass("is-active"),o.pushState({Page:e,Title:r},r,e),t(".mdl-spinner").remove(),t(s).removeClass("loading").html(l),n.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(e,i,n){t(s).find(".qor-section").show(),t(".mdl-spinner").remove(),window.alert([i,n].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),s=o.data(r);s||o.data(r,s=new e(this,i)),"string"==typeof i&&t.isFunction(n=s[i])&&n.call(s)})},t(function(){var i='[data-toggle="qor.global.search"]',n={};t(document).on("disable."+r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable."+r,function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler("enable."+r)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.FormData,n="qor.selectcore";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on("click."+n,".qor-table-container tbody tr",this.processingData.bind(this)).on("submit."+n,"form",this.submit.bind(this))},unbind:function(){this.$element.off("click."+n,".qor-table tbody tr",this.processingData.bind(this)).off("submit."+n,"form",this.submit.bind(this))},processingData:function(e){var i,n=t(e.target).closest("tr"),o={},r=this.options,s=r.onSelect;return o=t.extend({},o,n.data()),o.$clickElement=n,i=o.mediaLibraryUrl||o.url,i?t.getJSON(i,function(i){i.MediaOption&&(i.MediaOption=JSON.parse(i.MediaOption)),o=t.extend({},i,o),s&&t.isFunction(s)&&s(o,e)}):s&&t.isFunction(s)&&s(o,e),!1},submit:function(e){var n,o=e.target,r=t(o),s=this,a=r.find(":submit"),l=this.options.onSubmit;i&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new i(o),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){r.parent().find(".qor-error").remove(),a.prop("disabled",!0)},success:function(i){n=i,n.primaryKey=n.ID,t(".qor-error").remove(),l&&t.isFunction(l)?l(n,e):s.refresh()},error:function(t,e,i){var n=t.responseJSON.errors[0];422===t.status&&n?r.before('<ul class="qor-error"><li><label><i class="material-icons">error</i><span>'+n.Message+"</span></label></li></ul>"):window.alert([e,i].join(": "))},complete:function(){a.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},e.plugin=function(i){return this.each(function(){var o,r=t(this),s=r.data(n);if(!s){if(/destroy/.test(i))return;r.data(n,s=new e(this,i))}"string"==typeof i&&t.isFunction(o=s[i])&&o.apply(s)})},t.fn.qorSelectCore=e.plugin,e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),o=window.Mustache,r="qor.selectone",s="click."+r,a="qor-selected-many__deleted",l=".qor-field__selectmany",d="qor-bottomsheets__select-many";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(s,"[data-selectmany-url]",this.openBottomSheets.bind(this)).on("reload.qor.bottomsheets","."+d,this.reloadData.bind(this)),this.$element.on(s,".qor-selected-many__remove",this.clearSelect.bind(this)).on(s,".qor-selected-many__undo",this.undoDelete.bind(this))},unbind:function(){n.off(s,"[data-selectmany-url]",this.openBottomSheets.bind(this)).off("reload.qor.bottomsheets","."+d,this.reloadData.bind(this)),this.$element.off(s,".qor-selected-many__remove",this.clearSelect.bind(this)).off(s,".qor-selected-many__undo",this.undoDelete.bind(this))},clearSelect:function(e){var i=t(e.target),n=i.closest(l);return i.closest("[data-primary-key]").addClass(a),this.updateSelectInputData(n),!1},undoDelete:function(e){var i=t(e.target),n=i.closest(l);return i.closest("[data-primary-key]").removeClass(a),this.updateSelectInputData(n),!1},openBottomSheets:function(e){var n=t(e.target),o=n.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=o,this.$selector=o.selectId?t(o.selectId):n.closest(l).find("select"),this.$selectFeild=this.$selector.closest(l).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=t('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=t('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=t('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=t('[name="select-many-template"]').html(),o.url=o.selectmanyUrl,this.BottomSheets.open(o,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return o.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return o.render(this.SELECT_MANY_HINT,t)},initItems:function(){var e,i=t(".qor-bottomsheets").find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+a).each(function(){r.push(t(this).data().primaryKey)}),i.each(function(){var i=t(this),s=i.find("td:first");e=i.data().primaryKey,"-1"!=r.indexOf(e)?(i.addClass("is_selected"),s.append(n)):s.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+a).length}},updateHint:function(e){var i;t.extend(e,this.bottomsheetsData),i=this.renderHint(e),t(".qor-selectmany__hint").remove(),t(".qor-bottomsheets").find(".qor-page__body").before(i)},updateSelectInputData:function(i){var n,r,s,l=i||this.$selectFeild,d=l.find("[data-primary-key]").not("."+a),c=i?i.find(".qor-field__selectmany-input"):this.$selector,h=c.find("option");h.prop("selected",!1),d.each(function(){s=t(this).data().primaryKey,n=h.filter('[value="'+s+'"]'),n.length||(r={primaryKey:s,displayName:""},n=t(o.render(e.SELECT_MANY_OPTION_TEMPLATE,r)),c.append(n)),n.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(".qor-selected-many__remove").click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(i,n){var r,s=this.renderSelectMany(i),l=this.$selectFeild.find('[data-primary-key="'+i.primaryKey+'"]');return l.length?l.hasClass(a)?(l.removeClass(a),this.updateSelectInputData(),void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(s),n?(r=t(o.render(e.SELECT_MANY_OPTION_TEMPLATE,i)),r.appendTo(this.$selector),r.prop("selected",!0),void this.BottomSheets.hide()):void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(){var e=t(".qor-bottomsheets"),i={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};e.qorSelectCore(i).addClass(d),this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){if(t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],e)return void this.addItem(t,!0);var i,n=t.$clickElement;n.toggleClass("is_selected"),i=n.hasClass("is_selected"),i?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var n,o=t(this),s=o.data(r);if(!s){if(/destroy/.test(i))return;o.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(n=s[i])&&n.apply(s)})},t(function(){var i='[data-toggle="qor.selectmany"]';t(document).on("disable."+r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable."+r,function(n){e.plugin.call(t(i,n.target))}).triggerHandler("enable."+r)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),o=window.Mustache,r="qor.selectone",s="click."+r,a="qor-bottomsheets__select-one";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(s,"[data-selectone-url]",this.openBottomSheets.bind(this)).on("reload.qor.bottomsheets","."+a,this.reloadData.bind(this)),this.$element.on(s,".qor-selected__remove",this.clearSelect.bind(this)).on(s,".qor-selected__change",this.changeSelect)},unbind:function(){n.off(s,"[data-selectone-url]",this.openBottomSheets.bind(this)).off("reload.qor.bottomsheets","."+a,this.reloadData.bind(this)),this.$element.off(s,".qor-selected__remove",this.clearSelect.bind(this)).off(s,".qor-selected__change",this.changeSelect)},clearSelect:function(e){var i=t(e.target),n=i.closest(".qor-field__selectone");return n.find(".qor-field__selected").remove(),n.find(".qor-field__selectone-input")[0].value="",n.find(".qor-field__selectone-trigger").show(),n.trigger("qor.selectone.unselected"),!1},changeSelect:function(){t(this).closest(".qor-field__selectone").find(".qor-field__selectone-trigger").trigger("click")},openBottomSheets:function(e){var n=t(e.target),o=n.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=o,this.$parent=n.closest(".qor-field__selectone"),o.url=o.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=t('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(o,this.handleSelectOne.bind(this))},initItem:function(){var e,i=this.$parent.find(".qor-field__selected");i.length&&(e=i.data().primaryKey)&&t(".qor-bottomsheets").find('tr[data-primary-key="'+e+'"]').addClass("is_selected").find("td:first").append(this.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(e){return o.render(t('[name="select-one-selected-template"]').html(),e)},handleSelectOne:function(){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)}
;t(".qor-bottomsheets").qorSelectCore(e).addClass(a).data(this.bottomsheetsData),this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(i,n){var r,s=this.bottomsheetsData,a=this.$parent,l=s.selectId?t(s.selectId):a.find("select"),d=a.find(".qor-field__selected");i.displayName=i.Text||i.Name||i.Title||i.Code||i[Object.keys(i)[0]],l.length&&(l[0].value=i.primaryKey,r=this.renderSelectOne(i),d.length&&d.remove(),a.prepend(r),a.find(".qor-field__selectone-trigger").hide(),n&&(l.append(o.render(e.SELECT_ONE_OPTION_TEMPLATE,i)),l[0].value=i.primaryKey),a.trigger("qor.selectone.selected",[i]),t(".qor-bottomsheets").qorSelectCore("destroy"),this.BottomSheets.hide())},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var n,o=t(this),s=o.data(r);if(!s){if(/destroy/.test(i))return;o.data(r,s=new e(this,i))}"string"==typeof i&&t.isFunction(n=s[i])&&n.apply(s)})},t(function(){var i='[data-toggle="qor.selectone"]';t(document).on("disable."+r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable."+r,function(n){e.plugin.call(t(i,n.target))}).triggerHandler("enable."+r)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),n="qor.selector",o="click."+n;return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,n=t(e.TEMPLATE),o=this.options.aligned+"-aligned",r={},s=i.data(),a=s.hover,l=i.attr("name");this.isBottom="bottom"==s.position,a&&n.addClass("hover"),n.addClass(o).find(".qor-selector-menu").html(function(){var e=[];return i.children().each(function(){var i=t(this),n=i.attr("selected"),o=i.attr("disabled"),s=i.attr("value"),a=i.text(),d=[];n&&(d.push("selected"),r.value=s,r.label=a,r.paramName=l),o&&d.push("disabled"),e.push("<li"+(d.length?' class="'+d.join(" ")+'"':"")+' data-value="'+s+'" data-label="'+a+'" data-param-name="'+l+'">'+a+"</li>")}),e.join("")}),this.$selector=n,i.hide().after(n),n.find(".qor-selector-toggle").data("paramName",l),this.pick(r,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(o,t.proxy(this.click,this)),i.on(o,t.proxy(this.close,this))},unbind:function(){this.$selector.off(o,this.click),i.off(o,this.close)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(".qor-selector-clear")?this.clear():i.is("li")?(i.hasClass("selected")||i.hasClass("disabled")||this.pick(i.data()),this.close()):i.closest(".qor-selector-toggle").length&&this.open()},pick:function(e,i){var o=this.$selector,r=!!e.value,s=this.$element;o.find(".qor-selector-toggle").toggleClass("active",r).toggleClass("clearable",r&&this.options.clearable).find(".qor-selector-label").text(e.label||this.placeholder),i||(o.find(".qor-selector-menu").children('[data-value="'+e.value+'"]').addClass("selected").siblings(".selected").removeClass("selected"),s.val(e.value),s.closest(".qor-bottomsheets").length&&!s.closest('[data-toggle="qor.filter"]').length?t(".qor-bottomsheets").trigger("selectorChanged."+n,[e.value,e.paramName]):s.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(".qor-selector-toggle").removeClass("active").removeClass("clearable").find(".qor-selector-label").text(this.placeholder).end().end().find(".qor-selector-menu").children(".selected").removeClass("selected"),t.val("").trigger("change")},open:function(){i.triggerHandler(o),t(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(n)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var o,r,s=t(this),a=s.data(n);if(!a){if(/destroy/.test(i))return;o=t.extend({},e.DEFAULTS,s.data(),"object"===(void 0===i?"undefined":_typeof(i))&&i),s.data(n,a=new e(this,o))}"string"==typeof i&&t.isFunction(r=a[i])&&r.apply(a)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on("disable."+n,function(n){e.plugin.call(t(i,n.target),"destroy")}).on("enable."+n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler("enable."+n)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){var i="string"==typeof t?document.getElementById(t):t,n=i.cloneNode(!1);return n.innerHTML=e,i.parentNode.replaceChild(n,i),n}function i(e,i){var n=[],o="href";return i&&(o="src"),e.each(function(){n.push(t(this).attr(o))}),h.uniq(n)}function n(e,i){var n=t.fn.qorSliderAfterShow;for(var o in n)n.hasOwnProperty(o)&&!n[o].isLoaded&&(n[o].isLoaded=!0,n[o].call(this,e,i))}function o(e,i,o){for(var r=0,s=0,a=e.length;s<a;s++){var l=document.createElement("script");l.onload=function(){r++,r===e.length&&t.isFunction(o)&&o(),i&&i.url&&i.response&&n(i.url,i.response)},l.src=e[s],document.body.appendChild(l)}}function r(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&r(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function s(e){var n=t("script"),o=i(e,!0),r=i(n,!0);return h.difference(o,r)}function a(e){var n=t("link"),o=i(e),r=i(n);return h.difference(o,r)}function l(e,i){this.$element=t(e),this.options=t.extend({},l.DEFAULTS,t.isPlainObject(i)&&i),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}var d=t(document),c=window.FormData,h=window._,u="qor.slideout";return l.prototype={constructor:l,init:function(){this.build(),this.bind()},build:function(){var e;this.$slideout=e=t(l.TEMPLATE).appendTo("body"),this.$slideoutTemplate=e.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on("submit."+u,"form",t.proxy(this.submit,this)).on("click."+u,".qor-slideout__fullscreen",t.proxy(this.toggleSlideoutMode,this)).on("click."+u,'[data-dismiss="slideout"]',t.proxy(this.hide,this)),d.on("keyup."+u,t.proxy(this.keyup,this))},unbind:function(){this.$slideout.off("submit."+u,this.submit),d.off("keyup."+u,this.keyup).off("click."+u,this.hide)},keyup:function(e){if(27===e.which){if(t(".qor-bottomsheets").is(":visible")||t(".qor-modal").is(":visible")||t("#redactor-modal-box").length)return;this.hide(),this.removeSelectedClass()}},loadExtraResource:function(t){var e=a(t.$links),i=s(t.$scripts);e.length&&r(e),i.length&&o(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){t(".qor-body__loading").remove(),t(l.TEMPLATE_LOADING).appendTo(t("body")).trigger("enable")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},submit:function(e){var i=this.$slideout,n=this.$body,o=e.target,r=t(o),s=this,a=r.find(":submit");i.trigger("slideoutBeforeSend."+u),c&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new c(o),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){a.prop("disabled",!0),t.fn.qorSlideoutBeforeHide=null},success:function(e){var n=r.data("returnUrl"),o=r.data("refreshUrl");if(i.trigger("slideoutSubmitComplete."+u),o)return void(window.location.href=o);if("refresh"==n)return void s.refresh();if(n&&"refresh"!=n)s.load(n);else{var a="/"+location.pathname.split("/")[1],l=[];t(e).find(".qor-alert").each(function(e,i){var n=t(i).find(".qor-alert-message").text().trim(),o=t(i).data("type");""!==n&&l.push({Type:o,Message:n,Keep:!0})}),l.length>0&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+"; path="+a),s.refresh()}},error:function(e,o,s){var a;422===e.status?(n.find(".qor-error").remove(),r.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),a=t(e.responseText).find(".qor-error"),r.before(a),a.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&r.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([o,s].join(": "))},complete:function(){a.prop("disabled",!1)}}))},load:function(i,n){var l,d,c,h,f=this.options,p=this.$slideout;i&&(n=t.isPlainObject(n)?n:{},l=n.method?n.method:"GET",d=n.datatype?n.datatype:"html",c=t.proxy(function(){t.ajax(i,{method:l,dataType:d,cache:!0,ifModified:!0,success:t.proxy(function(d){var c=void 0,m=void 0,y=void 0,b=void 0,g=void 0,v=void 0;if(t(".qor-body__loading").remove(),"GET"===l){if(c=t(d),m=c.find(".mdl-layout__content.qor-page"),y=m.find(".qor-form-container"),this.slideoutType=y.length&&y.data().slideoutType,!m.length)return;var q=d.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);if(q){q=q.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),v=t(q).prop("class"),t("body").addClass(v);var _={$scripts:c.filter("script"),$links:c.filter("link"),url:i,response:d};this.loadExtraResource(_)}if(m.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),b=s(m.find("script[src]")),g=a(m.find("link[href]")),b.length){o(b,{url:i,response:d},function(){})}g.length&&r(g),m.find("script[src],link[href]").remove(),p.html(this.$slideoutTemplate),h=p.find(".qor-slideout__title"),this.$body=p.find(".qor-slideout__body"),h.html(c.find(f.title).html()),e(p.find(".qor-slideout__body")[0],m.html()),this.$body.find(".qor-actions__locale").remove(),p.one("shown."+u,function(){t(this).trigger("enable")}).one("hidden."+u,function(){t(this).trigger("disable")}),p.find(".qor-slideout__opennew").attr("href",i),this.show();var w=t.fn.qorSliderAfterShow;if(w)for(var k in w)w.hasOwnProperty(k)&&t.isFunction(w[k])&&(w[k].isLoaded=!0,w[k].call(this,i,d));p.trigger("slideoutLoaded."+u,[i,d])}else n.returnUrl?this.load(n.returnUrl):this.refresh()},this),error:t.proxy(function(){var e;t(".qor-body__loading").remove(),e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(e)},this)})},this),this.slided?(this.hide(),this.$slideout.one("hidden."+u,c)):c())},open:function(t){this.addLoading(),this.load(t.url,t.data)},reload:function(t){this.hide(),this.load(t)},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event("show."+u),i.trigger(e),e.isDefaultPrevented()||(i.removeClass("qor-slideout-mini"),"mini"==this.slideoutType&&i.addClass("qor-slideout-mini"),i.addClass("is-shown").get(0).offsetWidth,i.one("transitionend",t.proxy(this.shown,this)).addClass("is-slided").scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass("qor-slideout-open"),this.$slideout.trigger("beforeEnable.qor.slideout").trigger("shown."+u).trigger("afterEnable.qor.slideout")},hide:function(){t.fn.qorSlideoutBeforeHide?window.confirm("You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes!")&&this.hideSlideout():this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var e,i=this.$slideout,n=t(".qor-datepicker").not(".hidden");window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,n.length&&n.addClass("hidden"),this.slided&&(e=t.Event("hide."+u),i.trigger(e),e.isDefaultPrevented()||(i.one("transitionend",t.proxy(this.hidden,this)).removeClass("is-slided qor-slideout__fullscreen"),i.trigger("slideoutClosed."+u)))},hidden:function(){this.slided=!1,t("body").removeClass("qor-slideout-open"),this.$slideout.removeClass("is-shown").trigger("hidden."+u)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(u)}},l.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},l.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',l.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',l.plugin=function(e){return this.each(function(){var i,n=t(this),o=n.data(u);if(!o){if(/destroy/.test(e))return;n.data(u,o=new l(this,e))}"string"==typeof e&&t.isFunction(i=o[e])&&i.apply(o)})},t.fn.qorSlideout=l.plugin,l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location;return e.prototype={constructor:e,init:function(){this.$element.addClass("is-sortable"),this.bind()},bind:function(){this.$element.on("click.qor.sorter","> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off("click.qor.sorter",this.sort)},sort:function(e){var n=t(e.currentTarget),o=n.data("orderBy"),r=i.search,s="order_by="+o;o&&(/order_by/.test(r)?r=r.replace(/order_by(=\w+)?/,function(){return s}):r+=r.indexOf("?")>-1?"&"+s:s,i.search=r)},destroy:function(){this.unbind(),this.$element.removeClass("is-sortable").removeData("qor.sorter")}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.sorter");if(!r){if(/destroy/.test(i))return;o.data("qor.sorter",r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){t(document).on("disable.qor.sorter",function(i){e.plugin.call(t(".qor-js-table",i.target),"destroy")}).on("enable.qor.sorter",function(i){e.plugin.call(t(".qor-js-table",i.target))}).triggerHandler("enable.qor.sorter")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window._,n=t("body"),o="click.qor.tabbar",r=".qor-layout__tab-button",s=".mdl-layout__tab-bar-container";return e.prototype={constructor:e,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(o,r,this.switchTab.bind(this)),this.$element.on(o,".qor-layout__tab-right",this.scrollTabRight.bind(this)),this.$element.on(o,".qor-layout__tab-left",this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(o,r,this.switchTab),this.$element.off(o,".qor-layout__tab-right",this.scrollTabRight),this.$element.off(o,".qor-layout__tab-left",this.scrollTabLeft)},initTab:function(){var o=this.$element.data();o.scopeActive?n.data("tabScopeActive",o.scopeActive):(t(r).first().addClass("is-active"),n.data("tabScopeActive",t(r).first().data("name"))),this.tabWidth=0,this.slideoutWidth=t(".qor-layout__tab-content").outerWidth(),i.each(t(r),function(e){this.tabWidth=this.tabWidth+t(e).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(s).append(e.ARROW_RIGHT)},scrollTabLeft:function(e){e.stopPropagation();var i=t(s),n=i.scrollLeft(),o=n-this.slideoutWidth;n>0&&i.animate({scrollLeft:o},400,function(){t(".qor-layout__tab-right").show(),0==i.scrollLeft()&&t(".qor-layout__tab-left").hide()})},scrollTabRight:function(i){i.stopPropagation();var n=t(s),o=n.scrollLeft(),r=this.tabWidth,a=this.slideoutWidth,l=o+a;l<r&&(n.animate({scrollLeft:l},400,function(){t(".qor-layout__tab-left").show(),n.scrollLeft()+a>=r&&t(".qor-layout__tab-right").hide()}),!t(".qor-layout__tab-left").length&&this.$element.find(s).prepend(e.ARROW_LEFT))},switchTab:function(e){var i=t(e.target),o=this.$element,s=i.data(),a=n.data().tabScopeActive;if(t(".qor-slideout").is(":visible"))return!i.hasClass("is-active")&&(o.find(r).removeClass("is-active"),i.addClass("is-active"),t.ajax(s.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){t(".qor-layout__tab-spinner").remove(),t(".qor-layout__tab-content").hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(t(".qor-layout__tab-spinner")[0])},success:function(e){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",i.data("name"));var o=t(e).find(".qor-layout__tab-content").html();t(".qor-layout__tab-content").show().html(o).trigger("enable")},error:function(){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",a)}}),!1)},destroy:function(){this.unbind(),n.removeData("tabScopeActive")}},e.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',e.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data("qor.tabbar");if(!r){if(/destroy/.test(i))return;o.data("qor.tabbar",r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){t(document).on("disable.qor.tabbar",function(i){e.plugin.call(t('[data-toggle="qor.tab"]',i.target),"destroy")}).on("enable.qor.tabbar",function(i){e.plugin.call(t('[data-toggle="qor.tab"]',i.target))}).triggerHandler("enable.qor.tabbar")}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,o){this.$element=t(i),this.options=t.extend(!0,{},e.DEFAULTS,t.isPlainObject(o)&&o),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(n),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}var i="qor.timepicker",n="[data-picker-type]";return e.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){var e={timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"};this.isDateTimePicker&&this.$targetInput.qorTimepicker(e).on("selectTime."+i,t.proxy(this.changeTime,this)).on("blur."+i,t.proxy(this.blur,this)).on("focus."+i,t.proxy(this.focus,this)).on("keydown."+i,t.proxy(this.keydown,this)),this.$element.on("click."+i,t.proxy(this.show,this))},unbind:function(){this.$element.off("click."+i,this.show),this.isDateTimePicker&&this.$targetInput.off("selectTime."+i,this.changeTime).off("blur."+i,this.blur).off("focus."+i,this.focus).off("keydown."+i,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,r,s=this.$targetInput.val(),a=s.split(" "),l=a.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(s){if(1==l)c.test(a[0])&&(e=a[0],i="00:00"),d.test(a[0])&&(e=this.dateValueNow,i=a[0]);else for(var h=0;h<l;h++){n=c.test(a[h]),o=d.test(a[h]),n&&(e=a[h],r="-"),o&&(i=a[h],r=":"),t=a[h].split(r);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(r)),o&&(i=t.join(r))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(t.keyCode)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,o=n.test(i),r=e.data().timepickerList.find(".ui-timepicker-selected").html();t=i?o?i.replace(n,r):i+" "+r:this.dateValueNow+" "+r,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,r,s=t(this),a=s.data(i);if(!a){if(!t.fn.qorDatepicker)return;if(/destroy/.test(n))return;o=t.extend(!0,{},s.data(),"object"===(void 0===n?"undefined":_typeof(n))&&n),s.data(i,a=new e(this,o))}"string"==typeof n&&t.isFunction(r=a[n])&&r.apply(a)})},t(function(){var n='[data-toggle="qor.timepicker"]';t(document).on("disable."+i,function(i){e.plugin.call(t(n,i.target),"destroy")}).on("enable."+i,function(i){e.plugin.call(t(n,i.target))}).triggerHandler("enable."+i)}),e});